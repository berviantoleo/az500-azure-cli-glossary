<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Azure Virtual Network | Azure CLI Glossary</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Preparation for AZ-500, collection of usefull command to have more knowledge and pass your certification!">
    
    <link rel="preload" href="/az500-azure-cli-glossary/assets/css/0.styles.25644fd3.css" as="style"><link rel="preload" href="/az500-azure-cli-glossary/assets/js/app.bd3e1ae8.js" as="script"><link rel="preload" href="/az500-azure-cli-glossary/assets/js/2.399ef136.js" as="script"><link rel="preload" href="/az500-azure-cli-glossary/assets/js/12.eb906a1c.js" as="script"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/10.a7a22b24.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/11.9338f3fc.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/13.5cd639f5.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/14.59f79983.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/15.85935cc7.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/16.4624f97e.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/3.d3fc86e9.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/4.18b7f171.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/5.3b337730.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/6.eafd2c6f.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/7.faac88e5.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/8.1a83db92.js"><link rel="prefetch" href="/az500-azure-cli-glossary/assets/js/9.6ab4f404.js">
    <link rel="stylesheet" href="/az500-azure-cli-glossary/assets/css/0.styles.25644fd3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/az500-azure-cli-glossary/" class="home-link router-link-active"><!----> <span class="site-name">Azure CLI Glossary</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/az500-azure-cli-glossary/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Common" class="dropdown-title"><span class="title">Common</span> <span class="arrow down"></span></button> <button type="button" aria-label="Common" class="mobile-dropdown-title"><span class="title">Common</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/azuread/" class="nav-link">
  Azure AD
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/common/" class="nav-link">
  Common Command
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/resourcegroup/" class="nav-link">
  Resource Group
</a></li></ul></div></div><div class="nav-item"><a href="/az500-azure-cli-glossary/network/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Azure Network
</a></div><div class="nav-item"><a href="/az500-azure-cli-glossary/vm/" class="nav-link">
  VM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Security" class="dropdown-title"><span class="title">Security</span> <span class="arrow down"></span></button> <button type="button" aria-label="Security" class="mobile-dropdown-title"><span class="title">Security</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/policy/" class="nav-link">
  Azure Policy
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/azurerbac/" class="nav-link">
  Azure RBAC
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/keyvault/" class="nav-link">
  Key Vault
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/berviantoleo/az500-azure-cli-glossary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/az500-azure-cli-glossary/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Common" class="dropdown-title"><span class="title">Common</span> <span class="arrow down"></span></button> <button type="button" aria-label="Common" class="mobile-dropdown-title"><span class="title">Common</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/azuread/" class="nav-link">
  Azure AD
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/common/" class="nav-link">
  Common Command
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/resourcegroup/" class="nav-link">
  Resource Group
</a></li></ul></div></div><div class="nav-item"><a href="/az500-azure-cli-glossary/network/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Azure Network
</a></div><div class="nav-item"><a href="/az500-azure-cli-glossary/vm/" class="nav-link">
  VM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Security" class="dropdown-title"><span class="title">Security</span> <span class="arrow down"></span></button> <button type="button" aria-label="Security" class="mobile-dropdown-title"><span class="title">Security</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/policy/" class="nav-link">
  Azure Policy
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/azurerbac/" class="nav-link">
  Azure RBAC
</a></li><li class="dropdown-item"><!----> <a href="/az500-azure-cli-glossary/keyvault/" class="nav-link">
  Key Vault
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/berviantoleo/az500-azure-cli-glossary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Azure Virtual Network</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/az500-azure-cli-glossary/network/#create-a-subnet-and-virtual-network" class="sidebar-link">Create a subnet and virtual network</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/az500-azure-cli-glossary/network/#create-the-vpn-gateway" class="sidebar-link">Create the VPN gateway</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/az500-azure-cli-glossary/network/#upload-the-root-certificate-public-key-information" class="sidebar-link">Upload the root certificate public key information</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/az500-azure-cli-glossary/network/#configure-the-native-vpn-client" class="sidebar-link">Configure the native VPN client</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/az500-azure-cli-glossary/network/#network-security-group" class="sidebar-link">Network Security Group</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#create-network-security-group" class="sidebar-link">Create Network Security Group</a></li><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#create-nsg-rule-for-ssh" class="sidebar-link">Create NSG rule (for SSH)</a></li></ul></li><li><a href="/az500-azure-cli-glossary/network/#application-gateway" class="sidebar-link">Application Gateway</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#certificate-configuration-in-application-gateway-v1" class="sidebar-link">Certificate configuration in Application Gateway v1</a></li><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#certificate-configuration-in-application-gateway-v2" class="sidebar-link">Certificate configuration in Application Gateway v2</a></li><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#http-settings" class="sidebar-link">HTTP settings</a></li><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#create-a-frontend-port" class="sidebar-link">Create a frontend port</a></li><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#configure-a-listener" class="sidebar-link">Configure a listener</a></li></ul></li><li><a href="/az500-azure-cli-glossary/network/#define-a-rule-to-send-https-requests-to-the-servers" class="sidebar-link">Define a rule to send HTTPS requests to the servers</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/az500-azure-cli-glossary/network/#network-watcher" class="sidebar-link">Network Watcher</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#enable-network-watcher-for-your-region" class="sidebar-link">Enable Network Watcher for your region</a></li></ul></li><li><a href="/az500-azure-cli-glossary/network/#vm-relate" class="sidebar-link">VM Relate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#get-public-ip-address-from-vm" class="sidebar-link">Get Public IP Address from VM</a></li><li class="sidebar-sub-header"><a href="/az500-azure-cli-glossary/network/#disassociate-default-ip-address-from-the-vm" class="sidebar-link">Disassociate Default IP Address from the VM</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="azure-virtual-network"><a href="#azure-virtual-network" class="header-anchor">#</a> Azure Virtual Network</h1> <h2 id="create-a-subnet-and-virtual-network"><a href="#create-a-subnet-and-virtual-network" class="header-anchor">#</a> Create a subnet and virtual network</h2> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token variable">$Subnet</span>=<span class="token function">New-AzVirtualNetworkSubnetConfig</span> <span class="token operator">-</span>Name default <span class="token operator">-</span>AddressPrefix 10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token operator">/</span>24

<span class="token function">New-AzVirtualNetwork</span> <span class="token operator">-</span>Name myVnet <span class="token operator">-</span>ResourceGroupName vm<span class="token operator">-</span>networks <span class="token operator">-</span>Location <span class="token variable">$Location</span> <span class="token operator">-</span>AddressPrefix 10<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token operator">/</span>16 <span class="token operator">-</span>Subnet <span class="token variable">$Subnet</span>
</code></pre></div><h2 id="create-the-vpn-gateway"><a href="#create-the-vpn-gateway" class="header-anchor">#</a> Create the VPN gateway</h2> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token function">New-AzVirtualNetworkGateway</span> <span class="token operator">-</span>Name <span class="token variable">$GWName</span> <span class="token operator">-</span>ResourceGroupName <span class="token variable">$ResourceGroup</span> `
<span class="token operator">-</span>Location <span class="token variable">$Location</span> <span class="token operator">-</span>IpConfigurations <span class="token variable">$ipconf</span> <span class="token operator">-</span>GatewayType Vpn `
<span class="token operator">-</span>VpnType RouteBased <span class="token operator">-</span>EnableBgp <span class="token boolean">$false</span> <span class="token operator">-</span>GatewaySku VpnGw1 <span class="token operator">-</span>VpnClientProtocol <span class="token string">&quot;IKEv2&quot;</span>
</code></pre></div><h2 id="upload-the-root-certificate-public-key-information"><a href="#upload-the-root-certificate-public-key-information" class="header-anchor">#</a> Upload the root certificate public key information</h2> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token function">Add-AzVpnClientRootCertificate</span> <span class="token operator">-</span>VpnClientRootCertificateName <span class="token variable">$P2SRootCertName</span> <span class="token operator">-</span>VirtualNetworkGatewayname <span class="token variable">$GWName</span> <span class="token operator">-</span>ResourceGroupName <span class="token variable">$ResourceGroup</span> <span class="token operator">-</span>PublicCertData <span class="token variable">$CertBase64</span>
</code></pre></div><h2 id="configure-the-native-vpn-client"><a href="#configure-the-native-vpn-client" class="header-anchor">#</a> Configure the native VPN client</h2> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token variable">$profile</span> = <span class="token function">New-AzVpnClientConfiguration</span> <span class="token operator">-</span>ResourceGroupName <span class="token variable">$ResourceGroup</span> <span class="token operator">-</span>Name <span class="token variable">$GWName</span> <span class="token operator">-</span>AuthenticationMethod <span class="token string">&quot;EapTls&quot;</span>

<span class="token variable">$profile</span><span class="token punctuation">.</span>VPNProfileSASUrl
</code></pre></div><h2 id="network-security-group"><a href="#network-security-group" class="header-anchor">#</a> Network Security Group</h2> <h3 id="create-network-security-group"><a href="#create-network-security-group" class="header-anchor">#</a> Create Network Security Group</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network nsg create <span class="token punctuation">\</span>
  --resource-group <span class="token operator">&lt;</span>resource-group-name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --name <span class="token string">&quot;&lt;nsg name&gt;&quot;</span>
</code></pre></div><h3 id="create-nsg-rule-for-ssh"><a href="#create-nsg-rule-for-ssh" class="header-anchor">#</a> Create NSG rule (for SSH)</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network nsg rule create <span class="token punctuation">\</span>
    --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --nsg-name <span class="token operator">&lt;</span>nsg name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --name AllowSSHRule <span class="token punctuation">\</span>
    --direction Inbound <span class="token punctuation">\</span>
    --priority <span class="token number">100</span> <span class="token punctuation">\</span>
    --source-address-prefixes <span class="token string">'*'</span> <span class="token punctuation">\</span>
    --source-port-ranges <span class="token string">'*'</span> <span class="token punctuation">\</span>
    --destination-address-prefixes <span class="token string">'*'</span> <span class="token punctuation">\</span>
    --destination-port-ranges <span class="token number">22</span> <span class="token punctuation">\</span>
    --access Allow <span class="token punctuation">\</span>
    --protocol Tcp <span class="token punctuation">\</span>
    --description <span class="token string">&quot;Allow inbound SSH&quot;</span>
</code></pre></div><h2 id="application-gateway"><a href="#application-gateway" class="header-anchor">#</a> Application Gateway</h2> <h3 id="certificate-configuration-in-application-gateway-v1"><a href="#certificate-configuration-in-application-gateway-v1" class="header-anchor">#</a> Certificate configuration in Application Gateway v1</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway auth-cert create <span class="token punctuation">\</span>
    --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --name <span class="token operator">&lt;</span>certificate name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --cert-file <span class="token operator">&lt;</span>path to authentication certificate<span class="token operator">&gt;</span>
</code></pre></div><h3 id="certificate-configuration-in-application-gateway-v2"><a href="#certificate-configuration-in-application-gateway-v2" class="header-anchor">#</a> Certificate configuration in Application Gateway v2</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway root-cert create <span class="token punctuation">\</span>
      --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
      --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
      --name <span class="token operator">&lt;</span>certificate name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
      --cert-file <span class="token operator">&lt;</span>path to trusted CA certificate<span class="token operator">&gt;</span>
</code></pre></div><h3 id="http-settings"><a href="#http-settings" class="header-anchor">#</a> HTTP settings</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway http-settings create <span class="token punctuation">\</span>
    --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --name <span class="token operator">&lt;</span>HTTPS settings name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --port <span class="token number">443</span> <span class="token punctuation">\</span>
    --protocol Https <span class="token punctuation">\</span>
    --auth-certs <span class="token operator">&lt;</span>certificate name<span class="token operator">&gt;</span>
</code></pre></div><h3 id="create-a-frontend-port"><a href="#create-a-frontend-port" class="header-anchor">#</a> Create a frontend port</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway frontend-port create <span class="token punctuation">\</span>
    --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span>  <span class="token punctuation">\</span>
    --name <span class="token operator">&lt;</span>port name<span class="token operator">&gt;</span>
    --port <span class="token number">443</span>
</code></pre></div><h3 id="configure-a-listener"><a href="#configure-a-listener" class="header-anchor">#</a> Configure a listener</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway ssl-cert create <span class="token punctuation">\</span>
   --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
   --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
   --name <span class="token operator">&lt;</span>ssl certificate name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
   --cert-file <span class="token operator">&lt;</span>SSL certificate <span class="token function">file</span> <span class="token punctuation">(</span>PFX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">\</span>
   --cert-password <span class="token operator">&lt;</span>password <span class="token keyword">for</span> certificate file<span class="token operator">&gt;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway http-listener create <span class="token punctuation">\</span>
    --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --name <span class="token operator">&lt;</span>listener name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --frontend-port <span class="token operator">&lt;</span>frontend port name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --ssl-cert <span class="token operator">&lt;</span>ssl certificate name<span class="token operator">&gt;</span>
</code></pre></div><h2 id="define-a-rule-to-send-https-requests-to-the-servers"><a href="#define-a-rule-to-send-https-requests-to-the-servers" class="header-anchor">#</a> Define a rule to send HTTPS requests to the servers</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>az network application-gateway rule create <span class="token punctuation">\</span>
    --resource-group <span class="token operator">&lt;</span>resource group name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --gateway-name <span class="token operator">&lt;</span>application gateway name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --name <span class="token operator">&lt;</span>rule name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --address-pool <span class="token operator">&lt;</span>backend pool<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --http-listener <span class="token operator">&lt;</span>listener name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --http-settings <span class="token operator">&lt;</span>HTTPS settings name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
    --rule-type Basic
</code></pre></div><h2 id="network-watcher"><a href="#network-watcher" class="header-anchor">#</a> Network Watcher</h2> <h3 id="enable-network-watcher-for-your-region"><a href="#enable-network-watcher-for-your-region" class="header-anchor">#</a> Enable Network Watcher for your region</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>az network watcher configure <span class="token punctuation">\</span>
--locations westus <span class="token punctuation">\</span>
--enabled <span class="token boolean">true</span> <span class="token punctuation">\</span>
--resource-group <span class="token variable">$RG</span>
</code></pre></div><h2 id="vm-relate"><a href="#vm-relate" class="header-anchor">#</a> VM Relate</h2> <h3 id="get-public-ip-address-from-vm"><a href="#get-public-ip-address-from-vm" class="header-anchor">#</a> Get Public IP Address from VM</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token function">Get-AzPublicIpAddress</span> <span class="token operator">-</span>Name <span class="token string">&quot;VM Name&quot;</span>
</code></pre></div><h3 id="disassociate-default-ip-address-from-the-vm"><a href="#disassociate-default-ip-address-from-the-vm" class="header-anchor">#</a> Disassociate Default IP Address from the VM</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token variable">$nic</span> = <span class="token function">Get-AzNetworkInterface</span> <span class="token operator">-</span>Name dataProcStage2 <span class="token operator">-</span>ResourceGroup vm<span class="token operator">-</span>networks

<span class="token variable">$nic</span><span class="token punctuation">.</span>IpConfigurations<span class="token punctuation">.</span>publicipaddress<span class="token punctuation">.</span>id = <span class="token variable">$null</span>

<span class="token function">Set-AzNetworkInterface</span> <span class="token operator">-</span>NetworkInterface <span class="token variable">$nic</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/29/2021, 12:02:20 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/az500-azure-cli-glossary/assets/js/app.bd3e1ae8.js" defer></script><script src="/az500-azure-cli-glossary/assets/js/2.399ef136.js" defer></script><script src="/az500-azure-cli-glossary/assets/js/12.eb906a1c.js" defer></script>
  </body>
</html>
