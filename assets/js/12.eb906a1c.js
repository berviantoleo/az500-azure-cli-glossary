(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{369:function(a,t,s){"use strict";s.r(t);var e=s(25),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"azure-virtual-network"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#azure-virtual-network"}},[a._v("#")]),a._v(" Azure Virtual Network")]),a._v(" "),s("h2",{attrs:{id:"create-a-subnet-and-virtual-network"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-subnet-and-virtual-network"}},[a._v("#")]),a._v(" Create a subnet and virtual network")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Subnet")]),a._v("="),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("New-AzVirtualNetworkSubnetConfig")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Name default "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("AddressPrefix 10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("0"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("24\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("New-AzVirtualNetwork")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Name myVnet "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ResourceGroupName vm"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("networks "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Location "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Location")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("AddressPrefix 10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("0"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("16 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Subnet "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Subnet")]),a._v("\n")])])]),s("h2",{attrs:{id:"create-the-vpn-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-the-vpn-gateway"}},[a._v("#")]),a._v(" Create the VPN gateway")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("New-AzVirtualNetworkGateway")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Name "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GWName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ResourceGroupName "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ResourceGroup")]),a._v(" `\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Location "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Location")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("IpConfigurations "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ipconf")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("GatewayType Vpn `\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("VpnType RouteBased "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("EnableBgp "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("$false")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("GatewaySku VpnGw1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("VpnClientProtocol "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"IKEv2"')]),a._v("\n")])])]),s("h2",{attrs:{id:"upload-the-root-certificate-public-key-information"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upload-the-root-certificate-public-key-information"}},[a._v("#")]),a._v(" Upload the root certificate public key information")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Add-AzVpnClientRootCertificate")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("VpnClientRootCertificateName "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$P2SRootCertName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("VirtualNetworkGatewayname "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GWName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ResourceGroupName "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ResourceGroup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("PublicCertData "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$CertBase64")]),a._v("\n")])])]),s("h2",{attrs:{id:"configure-the-native-vpn-client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-native-vpn-client"}},[a._v("#")]),a._v(" Configure the native VPN client")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$profile")]),a._v(" = "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("New-AzVpnClientConfiguration")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ResourceGroupName "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ResourceGroup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Name "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GWName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("AuthenticationMethod "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"EapTls"')]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$profile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("VPNProfileSASUrl\n")])])]),s("h2",{attrs:{id:"network-security-group"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network-security-group"}},[a._v("#")]),a._v(" Network Security Group")]),a._v(" "),s("h3",{attrs:{id:"create-network-security-group"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-network-security-group"}},[a._v("#")]),a._v(" Create Network Security Group")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network nsg create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource-group-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  --name "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<nsg name>"')]),a._v("\n")])])]),s("h3",{attrs:{id:"create-nsg-rule-for-ssh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-nsg-rule-for-ssh"}},[a._v("#")]),a._v(" Create NSG rule (for SSH)")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network nsg rule create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --nsg-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("nsg name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --name AllowSSHRule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --direction Inbound "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --priority "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --source-address-prefixes "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'*'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --source-port-ranges "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'*'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --destination-address-prefixes "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'*'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --destination-port-ranges "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --access Allow "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --protocol Tcp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --description "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Allow inbound SSH"')]),a._v("\n")])])]),s("h2",{attrs:{id:"application-gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-gateway"}},[a._v("#")]),a._v(" Application Gateway")]),a._v(" "),s("h3",{attrs:{id:"certificate-configuration-in-application-gateway-v1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#certificate-configuration-in-application-gateway-v1"}},[a._v("#")]),a._v(" Certificate configuration in Application Gateway v1")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway auth-cert create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("certificate name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --cert-file "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path to authentication certificate"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h3",{attrs:{id:"certificate-configuration-in-application-gateway-v2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#certificate-configuration-in-application-gateway-v2"}},[a._v("#")]),a._v(" Certificate configuration in Application Gateway v2")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway root-cert create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n      --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n      --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n      --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("certificate name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n      --cert-file "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path to trusted CA certificate"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h3",{attrs:{id:"http-settings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-settings"}},[a._v("#")]),a._v(" HTTP settings")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway http-settings create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("HTTPS settings name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --port "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --protocol Https "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --auth-certs "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("certificate name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h3",{attrs:{id:"create-a-frontend-port"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-frontend-port"}},[a._v("#")]),a._v(" Create a frontend port")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway frontend-port create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("port name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    --port "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v("\n")])])]),s("h3",{attrs:{id:"configure-a-listener"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-a-listener"}},[a._v("#")]),a._v(" Configure a listener")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway ssl-cert create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("ssl certificate name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   --cert-file "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("SSL certificate "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("PFX"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n   --cert-password "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" certificate file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway http-listener create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("listener name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --frontend-port "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("frontend port name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --ssl-cert "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("ssl certificate name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h2",{attrs:{id:"define-a-rule-to-send-https-requests-to-the-servers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#define-a-rule-to-send-https-requests-to-the-servers"}},[a._v("#")]),a._v(" Define a rule to send HTTPS requests to the servers")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network application-gateway rule create "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --resource-group "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("resource group name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --gateway-name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("application gateway name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("rule name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --address-pool "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("backend pool"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --http-listener "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("listener name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --http-settings "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("HTTPS settings name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --rule-type Basic\n")])])]),s("h2",{attrs:{id:"network-watcher"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#network-watcher"}},[a._v("#")]),a._v(" Network Watcher")]),a._v(" "),s("h3",{attrs:{id:"enable-network-watcher-for-your-region"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enable-network-watcher-for-your-region"}},[a._v("#")]),a._v(" Enable Network Watcher for your region")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("az network watcher configure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--locations westus "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--enabled "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--resource-group "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$RG")]),a._v("\n")])])]),s("h2",{attrs:{id:"vm-relate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vm-relate"}},[a._v("#")]),a._v(" VM Relate")]),a._v(" "),s("h3",{attrs:{id:"get-public-ip-address-from-vm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-public-ip-address-from-vm"}},[a._v("#")]),a._v(" Get Public IP Address from VM")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Get-AzPublicIpAddress")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"VM Name"')]),a._v("\n")])])]),s("h3",{attrs:{id:"disassociate-default-ip-address-from-the-vm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disassociate-default-ip-address-from-the-vm"}},[a._v("#")]),a._v(" Disassociate Default IP Address from the VM")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nic")]),a._v(" = "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Get-AzNetworkInterface")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("Name dataProcStage2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("ResourceGroup vm"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("networks\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("IpConfigurations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("publicipaddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("id = "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$null")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("Set-AzNetworkInterface")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("NetworkInterface "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$nic")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);