(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{366:function(e,s,t){"use strict";t.r(s);var a=t(25),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"azure-rbac"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#azure-rbac"}},[e._v("#")]),e._v(" Azure RBAC")]),e._v(" "),t("h2",{attrs:{id:"review-built-in-roles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#review-built-in-roles"}},[e._v("#")]),e._v(" Review built-in roles")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role definition list --name "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Contributor"')]),e._v(" --output json "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" jq "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'.[] | .permissions[0].actions'")]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-AzRoleDefinition")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Name "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Contributor"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Select")]),e._v(" Actions "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ConvertTo-Json")]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"find-resource-provider-operations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#find-resource-provider-operations"}},[e._v("#")]),e._v(" Find resource provider operations")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az provider operation show\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-AzProviderOperation")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("virtualMachines/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"create-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-role"}},[e._v("#")]),e._v(" Create Role")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role definition create --role-definition vm-operator-role.json\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("New-AzRoleDefinition")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("InputFile "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vm-operator-role.json"')]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"update-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-role"}},[e._v("#")]),e._v(" Update Role")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role definition update --role-definition "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<<path-to-json-file>>"')]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Set-AzRoleDefinition")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("InputFile "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<<path-to-json-file>>"')]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"view-custom-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#view-custom-role"}},[e._v("#")]),e._v(" View Custom Role")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role definition list --custom-role-only "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v(" --output json "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" jq "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'.[] | {"roleName":.roleName, "roleType":.roleType}\'')]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-AzRoleDefinition")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" ? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$_")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("IsCustom "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-eq")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("$true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("FT")]),e._v(" Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" IsCustom\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"view-role-definition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#view-role-definition"}},[e._v("#")]),e._v(" View Role Definition")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role definition list --name "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Operator"')]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-AzRoleDefinition")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Operator"')]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"view-custom-role-assignment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#view-custom-role-assignment"}},[e._v("#")]),e._v(" View Custom Role Assignment")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role assignment list --role "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Operator"')]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-AzRoleAssignment")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("RoleDefinitionName "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Operator"')]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"delete-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete-role"}},[e._v("#")]),e._v(" Delete Role")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role definition delete --name "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"role name"')]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Get-AzRoleDefinition")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"role name"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Remove-AzRoleDefinition")]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"assign-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#assign-role"}},[e._v("#")]),e._v(" Assign Role")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role assignment create --assignee "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<UPN>"')]),e._v(" --role "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Virtual Machine Operator"')]),e._v("\n")])])]),t("h2",{attrs:{id:"assign-role-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#assign-role-2"}},[e._v("#")]),e._v(" Assign Role 2")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role assignment create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --assignee rbacuser@example.com "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --role "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Owner"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --subscription "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("subscription_name_or_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("New-AzRoleAssignment")]),e._v(" `\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("SignInName rbacuser@example"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("com `\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("RoleDefinitionName "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Owner"')]),e._v(" `\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Scope "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/subscriptions/<subscriptionID>"')]),e._v("\n")])])])])],1),e._v(" "),t("h2",{attrs:{id:"remove-assignment-role"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#remove-assignment-role"}},[e._v("#")]),e._v(" Remove Assignment Role")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Azure CLI"}},[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("az role assignment delete --role "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"role name"')]),e._v("\n")])])])]),e._v(" "),t("code-block",{attrs:{title:"Powershell"}},[t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Remove-AzRoleAssignment")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ObjectId <object_id> "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("RoleDefinitionName "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"role name"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Scope "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("subscriptions"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("<subscription_id>\n")])])])])],1)],1)}),[],!1,null,null,null);s.default=r.exports}}]);